<!DOCTYPE html>
<title>Linking : LD Slides</title>
<meta charset="utf-8" />
<link rel="stylesheet" href="ldslides.css" />
<script type="module">
  import {Steps} from './ldslides.js'

  let steps = new Steps(window)


  steps.load(`

<oai:DiVA.org:liu-65999> a :Instance ;
    :adminMetadata [ a :AdminMetadata ;
            :assigner [ a :Agent ;
                    :label "liu" ] ;
            :creationDate "2011-03-01" ] ;
    :carrier [ a :Carrier ;
            :label "electronic" ] ;
    :electronicLocator [ a :Resource ;
            :comment "Fulltext in repository" ;
            #:label "Fulltext in repository" ;
            :status <https://id.kb.se/term/swepub/publishedVersion> ; <--- vi har redan PublishedVersion (beskriver hela publikationen) men denna just denna fulltext.
            #:note <https://id.kb.se/term/swepub/publishedVersion> ;
            :adminMetadata [ a :AdminMetadata ;
                    :sourceConsulted [ a :SourceData ;
                            :url "https://unpaywall.com" ] ;
                            :date "2021-12-01" ] ;
            :usageAndAccessPolicy <https://id.kb.se/policy/gratis> ;
            :license <https://creativecommons.org/licenses/by/4.0/> ;
            :uri "http://liu.diva-portal.org/smash/get/diva2:401134/FULLTEXT01.pdf"^^xsd:anyURI ] ;
      [ a :Resource ;
            # originaldata :note [ a bf2:Note ; rdfs:label "primary" ; bf2:noteType "URL usage" ] ;
            :uri "http://liu.diva-portal.org/smash/get/diva2:401134/FULLTEXT01.pdf"^^xsd:anyURI ] ;
            :comment "Fulltext in repository" ; # was label
            TODO:usageAndAccessPolicy [a :Embargo ; :endDate "2022-04" ; ] ;
    :identifiedBy [ a :Doi ;
            :value "https://doi.org/10.2174/1875036201105010026" ],
        [ a :URI ;
            :value "http://urn.kb.se/resolve?urn=urn:nbn:se:liu:diva-65999" ] ;
    :instanceOf [ a :Text ;
            :contribution [ a :Contribution ;
                    :agent [ a :Person ;
                            :familyName "Hörnquist" ;
                            :givenName "Michael" ;
                            :lifeSpan "1969-" ] ;
                    :role <http://id.loc.gov/vocabulary/relators/aut> ;
                    :hasAffiliation [ a :Organization ;
                            :language <https://id.kb.se/language/swe> ;
                            foaf:name "Kommunikations- och transportsystem" ],
                        [ a :Organization ;
                            :identifiedBy [ a :URI ;
                                    :source [ a :Source ;
                                            :code "kb.se" ] ;
                                    :value "liu.se" ] ;
                            foaf:name "Linköpings universitet" ] ] ;
                <https://id.kb.se/term/swepub/publication/journal-article>,
                <https://id.kb.se/term/swepub/svep/ref> ;
            :language <https://id.kb.se/language/eng> ;
            :note [ a :CreatorCount ;
                    :label "2" ],
                <https://id.kb.se/term/swepub/Published> ;
            :subject [ a :Topic ;
                    :code "152400" ;
                    :isMemberOfMADSScheme <http://issemantic.net/svep/swe> ;
                    :prefLabel "Bioinformatik" ],
                [ a :Topic ;
                    :prefLabel "Systems biology" ],
                [ a :Topic ;
                    :code "152400" ;
                    :isMemberOfMADSScheme <http://issemantic.net/svep/eng> ;
                    :prefLabel "Bioinformatics" ] ;
            :summary [ a :Summary ;
                    :label "The inference of large-scale gene regulatory networks from high-throughput data sets has revealed a diverse picture of only partially overlapping descriptions [...]" ] ;
            :title [ a :Title ;
                    :mainTitle "Stability and Flexibility from a System Analysis of Gene RegulatoryNetworks Based on Ordinary Differential Equations" ] ] ;
    :usageAndAccessPolicy </gratis> ;
    :license <https://creativecommons.org/licenses/by/4.0/> ;
    # Spara från lärosätet? :usageAndAccessPolicy [ a bf2:AccessPolicy ; rdfs:label "gratis" ] ; 
    :partOf [ a :Work ;
            :hasInstance [ a :Instance ;
                    :extent [ a :Extent ;
                            :label "26-33" ] ] ;
            :identifiedBy [ a :Issn ;
                    :value "1875-0362" ] ;
            :title [ a :Title ;
                    :mainTitle "The Open Bioinformatics Journal" ;
                    :volumeNumber "5" ] ] ;
    :publication [ a :Publication ;
            :agent [ a :Agent ;
                    :label "Bentham Open" ] ;
            :date "2011" ;
            :status <https://id.kb.se/term/swepub/publishedVersion> ] ;
    :status <https://id.kb.se/term/swepub/access/doaj-journal> .

<https://creativecommons.org/licenses/by/4.0/> a :AccessPolicy ;
    :label "gratis" ;
    :TODO "Hur anger vi att informationen kommer från Unpaywall? Kan behövas om vi behöver rensa bland flera angivna @type : 'AccessPolicy' och/eller skriva över/rätta till informationen som kommer från den levererande organisationen. Behöver det anges för varje subelement för sig? T.ex. om label 'gratis' finns angiven och är korrekt men licensinformation har berikats från Unpaywall? Hur kopplar vi usageAndAccessPolicy till rätt fulltextlänk? Går det att använda 'appliesTo' eller relatedTo med @id med URI till resursen?" .

<https://id.kb.se/term/swepub/Published> a :PublicationStatus . # NOTE?


<https://id.kb.se/term/swepub/publishedVersion> a :VersionStatus ;
    :TODO "FÖRSLAG PÅ STATUS" ;
    :editorsNote "Följande alternativa versioner: info:eu-repo/semantics/draft,info:eu-repo/semantics/submittedVersion, info:eu-repo/semantics/acceptedVersion, info:eu-repo/semantics/publishedVersion , info:eu-repo/semantics/updatedVersion" .

`)
  const ref = id => ( { ['@id']: id } )

  const article = 'oai:DiVA.org:liu-65999'
  // const work = 'work1#it'
  const oa_policy = ref('https://id.kb.se/term/swepub/access/')

  // steps.display('Extrahera verket till ny post')
  // steps.extractAsLink(print, 'instanceOf', work)
  
  steps.display('Skapa doaj Accesspolicy'),
  steps.create(`
<ACCESSPOLICY> {

# "FÖRSLAG PÅ EN ARTIKEL INGÅENDE I EN PUBLICERINGSKANAL SOM ÄR ÖPPET TILLGÄNGLIG ENLIGT UNPAYWALL UTIFRÅN INFORMATIONEN FRÅN DOAJ"
# <https://id.kb.se/term/swepub/access/doaj-journal> a :AccessPolicy; :code "doaj-journal" .

# OA policies:
<https://id.kb.se/policy/gratis> a :AccessPolicy; :code "gratis"; :label "Öppen tillgång" .
<https://id.kb.se/policy/restricted> a :AccessPolicy; :code "restricted"; :label "Ej öppen tillgång" .

} `)

  steps.display('Lägg till doaj AccessPolicy'),
  steps.replace(article, 'usageAndAccessPolicy', ref(`${oa_policy}/doaj-journal`))

  steps.display('Beskriv ny öppen publicerad artikel med info från unpaywall')
  steps.add('oai:DiVA.org:liu-65999', 'electronicLocator', {
    '@type': 'Resource',
    adminMetadata: [
      '@type': 'AdminMetadata',
      sourceConsulted: [
        '@type': 'SourceData',
        url: 'https://unpaywall.com',
        date: '2021-12-01'
      ]
    ],
    comment: 'Fulltext in repository',
    license: {'@id': 'https://creativecommons.org/licenses/by/4.0/'},
    status: {'@id': 'https://id.kb.se/term/swepub/publishedVersion'},
    uri: 'http://liu.diva-portal.org/smash/get/diva2:401134/FULLTEXT01.pdf',
    usageAndAccessPolicy: {'@id': 'https://id.kb.se/policy/gratis'}
  })

</script>
